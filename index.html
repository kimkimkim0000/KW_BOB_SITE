<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KW BOB - 광운대생 식단 추천</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🍚 KW BOB</h1>
            <p>광운대생을 위한 맞춤형 식단 추천 서비스</p>
        </header>

        <section id="screen-login">
            <div class="auth-box">
                <h2 id="auth-title">로그인</h2>
                <input type="text" id="username" placeholder="아이디">
                <input type="password" id="password" placeholder="비밀번호">
                
                <div id="signup-fields" style="display: none;">
                    <hr>
                    <p class="signup-guide">👇 정확한 분석을 위해 정보를 입력해주세요</p>
                    <div class="input-group">
                        <input type="number" id="height" placeholder="키 (cm)">
                        <input type="number" id="weight" placeholder="몸무게 (kg)">
                    </div>
                    <div class="input-group">
                        <input type="number" id="age" placeholder="나이 (세)">
                        <select id="gender">
                            <option value="male">남성</option>
                            <option value="female">여성</option>
                        </select>
                    </div>
                    <select id="goal">
                        <option value="maintain">체중 유지</option>
                        <option value="lose">체중 감량 (다이어트)</option>
                        <option value="gain">체중 증가 (벌크업)</option>
                    </select>
                </div>

                <button onclick="handleAuthAction()" id="auth-action-btn" class="btn-primary">로그인</button>
                <p class="toggle-auth">
                    <span id="auth-msg">계정이 없으신가요?</span>
                    <a href="#" onclick="toggleAuthMode()" id="auth-toggle-btn">회원가입</a>
                </p>
            </div>
        </section>

        <section id="screen-dashboard" style="display: none;">
            <div class="header-row">
                <h3>반갑습니다, <span id="user-name-display">사용자</span>님!</h3>
                <button onclick="logout()" class="btn-small">로그아웃</button>
            </div>

            <div class="status-card">
                <p>내 목표: <span id="goal-display" style="font-weight:bold; color:#8a0e26;">-</span></p>
                <p>BMI: <span id="bmi-display">-</span> (<span id="bmi-status">-</span>)</p>
                <p>일일 권장: <span id="rec-cal">0</span> kcal</p>
            </div>

            <div class="status-card highlight">
                <p>오늘 섭취량: <span id="current-cal">0</span> / <span id="rec-cal-target">0</span> kcal</p>
                <div class="progress-bar">
                    <div id="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div class="food-log-container">
                <h4>📝 오늘의 식사 기록</h4>
                <ul id="food-log-list">
                    <li class="empty-log">아직 먹은 음식이 없습니다.</li>
                </ul>
            </div>

            <div style="margin-top: 20px;">
                <button onclick="showScreen('screen-recommendation')" class="btn-large">
                    🍽️ 오늘 뭐 먹지? (메뉴 추천 받기)
                </button>
            </div>
        </section>

        <section id="screen-recommendation" style="display: none;">
            <button onclick="showScreen('screen-dashboard')" class="btn-back">← 대시보드로 돌아가기</button>
            
            <h2>메뉴 추천</h2>
            
            <div class="price-filter">
                <h4>💰 가격대 선택</h4>
                <div class="radio-group">
                    <label><input type="radio" name="price" value="0" checked> 상관없음</label>
                    <label><input type="radio" name="price" value="1"> 1만원 미만</label>
                    <label><input type="radio" name="price" value="2"> 1만~1.2만원</label>
                    <label><input type="radio" name="price" value="3"> 1.2만~1.5만원</label>
                </div>
            </div>

            <div class="category-buttons">
                <button onclick="recommendFood('korean')">한식</button>
                <button onclick="recommendFood('chinese')">중식</button>
                <button onclick="recommendFood('western')">양식</button>
                <button onclick="recommendFood('snack')">분식</button>
                <button onclick="recommendFood('cook')">직접 요리</button>
            </div>

            <div id="recommendation-area"></div>

            <button id="retry-btn" onclick="retryRecommendation()" class="btn-retry" style="display:none;">
                🔄 마음에 안 들어요! (다른 메뉴 추천)
            </button>
        </section>
    </div>

    <div id="recipe-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3 id="recipe-title">요리 이름</h3>
            <div id="recipe-body"></div>
        </div>
    </div>

    <script src="script.js?v=final"></script>
</body>
</html>
